{"version":3,"sources":["../../src/pages/qr/qr.module.ts","../../src/pages/qr/qr.ts"],"names":[],"mappings":"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","file":"3.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { GeneratrorPage } from './qr';\n\n@NgModule({\n    declarations: [\n        GeneratrorPage,\n    ],\n    imports: [\n        IonicPageModule.forChild(GeneratrorPage),\n    ],\n})\nexport class QrPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/qr/qr.module.ts","import { Component } from '@angular/core';\nimport { NavController, IonicPage, LoadingController, AlertController } from 'ionic-angular';\nimport { UserService } from '../../services/user';\nimport { BarcodeScanner } from '@ionic-native/barcode-scanner';\nimport { AngularFirestore, AngularFirestoreDocument } from 'angularfire2/firestore';\nimport { Observable } from 'rxjs/Observable';\nimport { Doctor, RecordService } from '../../services/record';\n\n\n\n@IonicPage({\n    name: 'qr',\n    segment: 'qr'\n})\n\n@Component({ templateUrl: 'qr.html' })\nexport class GeneratrorPage {\n    public doctorID: String;\n    public doctorDoc: AngularFirestoreDocument<Doctor>;\n    public doctor: Observable<Doctor>;\n    public currentDoctor: Doctor;\n    constructor(public navCtrl: NavController, public userService: UserService, public barcodeScanner: BarcodeScanner, public afs: AngularFirestore, public recordService: RecordService, public loadingCtrl: LoadingController, public alertCtrl: AlertController) {\n\n    }\n\n    qrScan() {\n        this.barcodeScanner.scan({\n            formats: 'QR_CODE'\n        }).then((barcodeData) => {\n            let loading = this.loadingCtrl.create({\n                content: 'Waiting for connection...'\n            });\n            loading.present();\n            this.doctorID = barcodeData.text;\n            this.doctorDoc = this.afs.doc('doctor/' + this.doctorID);\n            this.doctor = this.doctorDoc.valueChanges();\n            new Promise((resolve, reject) => {\n                this.doctor.subscribe(doctor => {\n                    this.currentDoctor = doctor;\n                    this.currentDoctor.records = this.recordService.getCurrentRecords();\n                    this.currentDoctor.visited = true;\n                    resolve(this.currentDoctor);\n                });\n            }).then(success => {\n                this.doctorDoc.update(this.currentDoctor).then(success => {\n                    loading.dismiss();\n                }).catch(error => {\n                    let alert = this.alertCtrl.create({\n                        title: 'Connection Error',\n                        subTitle: 'Please try to scan again!',\n                        buttons: ['Understand']\n                    });\n                    alert.present();\n                });\n            });\n        }).catch(() => {\n            let alert = this.alertCtrl.create({\n                title: 'Scanning Error',\n                subTitle: 'Please try to scan again!',\n                buttons: ['Understand']\n            });\n            alert.present();\n        });\n    }\n\n    cancel() {\n        this.currentDoctor.visited = false;\n        this.currentDoctor.records = null;\n        this.doctorDoc.set(this.currentDoctor);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/qr/qr.ts"],"sourceRoot":""}